version: 2

sources:
    - name: staging
      database: log-analysis-pipeline-448011 
      schema: server_logs_data # same as set in the BigQuery

      tables:
          - name: daily_data # the partitioned table from your BigQuery dataset that consolidates all daily data

models:
    - name: stg_daily_data
      description: Access log files data collected from a site hosted on Heroku server.
      columns:
          - name: unique_row_id
            description: A unique identifier for each hit, generated by hashing key hit attributes.
            tests:
                - unique:
                    severity: warn
                - not_null:
                    severity: warn
          - name: filename
            description: The source filename from which the hit data was loaded.
          - name: ip_address
            description: Identifies the clients IP address.
          - name: timestamp
            description: Indicates the date and time of the request.
          - name: http_method
            description: Specifies the type of request.
          - name: requested_url
            description: The page being accessed.
          - name: http_protocol
            description: The protocol version used for the request.
          - name: response_code
            description: HTTP response status code.
          - name: bytes_transferred
            description: The size of data sent in response.
          - name: referrer
            description: The page the visitor came from.
          - name: user_agent
            description: A header sent during the HTTP request that tells the server what kind of` application (agent) is connecting to it.
          - name: bot_human_flag
            description: A flag that separates a bot request from a homan ones.
          - name: bot_name
            description: A flag that marks a request made by google bot.